CREATE DATABASE biblioteca_db;


CREATE TABLE IF NOT EXISTS libros (
    id               SERIAL PRIMARY KEY,
    titulo           VARCHAR(200) NOT NULL,
    autor            VARCHAR(150) NOT NULL,
    anio_publicacion INT NOT NULL CHECK (anio_publicacion BETWEEN 1450 AND 2100),
    editorial        VARCHAR(150),
    paginas          INT NOT NULL CHECK (paginas > 0),
    categoria        VARCHAR(100),
    isbn             VARCHAR(20),
    activo           BOOLEAN NOT NULL DEFAULT TRUE
);


CREATE OR REPLACE VIEW vw_libros_activos AS
SELECT 
    id,
    titulo,
    autor,
    anio_publicacion,
    editorial,
    paginas,
    categoria,
    isbn,
    activo
FROM libros
WHERE activo = TRUE;




INSERT INTO libros (titulo, autor, anio_publicacion, editorial, paginas, categoria, isbn)
VALUES
('Bioquímica Médica Esencial', 'Juan Carlos Rivas', 2021, 'Editorial Médica Panamericana', 520, 'Bioquímica', '9789581234570'),
('Fundamentos de Bioquímica: Enfoque Clínico', 'María Fernanda Delgado', 2019, 'McGraw-Hill Educación', 680, 'Bioquímica Clínica', '9786071503214'),
('Metabolismo Humano y Regulación Bioquímica', 'Luis Alberto Paredes', 2020, 'Editorial Científica Latinoamericana', 430, 'Metabolismo', '9786123456789');

